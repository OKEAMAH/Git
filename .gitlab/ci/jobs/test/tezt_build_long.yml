# Long Tezt tests are not ran in the CI, but we want them to type-check so that
# they can be built in the performance regression test framework executors.
tezt:build-long:
  extends:
    - .oc.build_template
  rules:
    - if:
      changes:
        paths:
          - src/**/*
          - tezt/**/*
      when: on_success
  stage: test
  # Artificial needs for ordering.
  needs:
    - "oc.build_x86_64-released"
    - "oc.build_x86_64-exp-dev-extra"
  script:
    - dune build @tezt/long_tests/check
