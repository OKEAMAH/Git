check_precommit_hook:
  extends:
    - .default_settings_template
    - .image_template__runtime_build_test_dependencies
    - .needs__trigger
  rules:
    - changes:
        paths:
          - scripts/pre_commit/pre_commit.py
          - .gitlab/**/*
          - .gitlab-ci.yml
      when: on_success
  stage: test
  before_script:
    - . ./scripts/version.sh
    # Load the environment poetry previously created in the docker image.
    # Give access to the Python dependencies/executables
    - . $HOME/.venv/bin/activate
  script:
    - poetry run pylint scripts/pre_commit/pre_commit.py
    - poetry run pycodestyle scripts/pre_commit/pre_commit.py
    - poetry run mypy scripts/pre_commit/pre_commit.py
